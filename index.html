<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QR Code Generator</title>

  <!-- QR library (small + reliable) -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

  <style>
    :root{
      --bg:#0b1220;
      --card:#111a2e;
      --ink:#e8eefc;
      --muted:#a7b3d1;
      --line:rgba(255,255,255,.12);
      --accent:#7c3aed;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(1200px 600px at 20% 0%, rgba(124,58,237,.28), transparent 60%),
                  radial-gradient(900px 500px at 80% 30%, rgba(14,165,233,.22), transparent 55%),
                  var(--bg);
      color:var(--ink);
      min-height:100vh;
      display:grid;
      place-items:center;
      padding:24px;
    }
    .wrap{
      width:min(980px, 100%);
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:18px;
    }
    @media (max-width: 900px){ .wrap{grid-template-columns:1fr; } }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius:18px;
      padding:18px;
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
    }
    h1{margin:0 0 8px; font-size:22px; letter-spacing:.2px}
    p{margin:0 0 14px; color:var(--muted); line-height:1.4}
    label{display:block; font-size:12px; color:var(--muted); margin:14px 0 8px}
    input, select{
      width:100%;
      padding:12px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.22);
      color:var(--ink);
      outline:none;
    }
    input:focus, select:focus{ border-color: rgba(124,58,237,.6); box-shadow: 0 0 0 4px rgba(124,58,237,.18); }
    .row{display:grid; grid-template-columns: 1fr 1fr; gap:12px}
    @media (max-width: 520px){ .row{grid-template-columns:1fr} }
    .btns{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
    button{
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      color:var(--ink);
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      transition:.15s transform, .15s background;
      font-weight:600;
    }
    button:hover{ background: rgba(255,255,255,.10); transform: translateY(-1px); }
    .primary{
      background: linear-gradient(120deg, rgba(124,58,237,.9), rgba(14,165,233,.8));
      border-color: transparent;
    }
    .primary:hover{ background: linear-gradient(120deg, rgba(124,58,237,1), rgba(14,165,233,.95)); }
    .hint{font-size:12px; color:var(--muted); margin-top:10px}
    .qrbox{
      display:grid;
      place-items:center;
      min-height: 360px;
      padding:18px;
    }
    .qrinner{
      width: 100%;
      max-width: 340px;
      background:#fff;
      border-radius:16px;
      padding:14px;
      box-shadow: 0 18px 50px rgba(0,0,0,.28);
    }
    canvas{width:100%; height:auto; display:block}
    .toast{
      position: fixed;
      bottom: 18px; left:50%; transform:translateX(-50%);
      background: rgba(0,0,0,.65);
      border:1px solid rgba(255,255,255,.14);
      color:var(--ink);
      padding:10px 12px;
      border-radius:12px;
      font-size:13px;
      opacity:0; pointer-events:none;
      transition:.2s opacity, .2s transform;
    }
    .toast.show{opacity:1; transform:translateX(-50%) translateY(-4px);}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>QR Code Generator</h1>
      <p>Paste a link, generate a QR code, then download or copy it.</p>

      <label for="url">Link / Text</label>
      <input id="url" type="text" placeholder="https://example.com" autocomplete="off" />

      <div class="row">
        <div>
          <label for="size">Size (px)</label>
          <input id="size" type="number" min="128" max="1024" value="360" />
        </div>
        <div>
          <label for="ec">Error correction</label>
          <select id="ec">
            <option value="L">L (7%)</option>
            <option value="M" selected>M (15%)</option>
            <option value="Q">Q (25%)</option>
            <option value="H">H (30%)</option>
          </select>
        </div>
      </div>

      <div class="btns">
        <button class="primary" id="gen">Generate</button>
        <button id="download" disabled>Download PNG</button>
        <button id="copy" disabled>Copy image</button>
        <button id="clear">Clear</button>
      </div>

      <div class="hint">
        Tip: Use higher error correction (Q/H) if youâ€™ll add a logo later or print small.
      </div>
    </div>

    <div class="card qrbox">
      <div class="qrinner">
        <canvas id="qr"></canvas>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    const elUrl = document.getElementById("url");
    const elSize = document.getElementById("size");
    const elEC = document.getElementById("ec");
    const canvas = document.getElementById("qr");
    const btnGen = document.getElementById("gen");
    const btnDl = document.getElementById("download");
    const btnCopy = document.getElementById("copy");
    const btnClear = document.getElementById("clear");
    const toast = document.getElementById("toast");

    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      clearTimeout(showToast._t);
      showToast._t = setTimeout(()=>toast.classList.remove("show"), 1600);
    }

    function normalizeInput(v){
      return (v || "").trim();
    }

    async function renderQR(){
      const text = normalizeInput(elUrl.value);
      const size = Math.max(128, Math.min(1024, parseInt(elSize.value || "360", 10)));
      const ecLevel = elEC.value;

      if(!text){
        showToast("Paste a link first ðŸ™‚");
        btnDl.disabled = true;
        btnCopy.disabled = true;
        return;
      }

      // Make canvas crisp on high DPI screens
      const dpr = window.devicePixelRatio || 1;
      canvas.width = Math.floor(size * dpr);
      canvas.height = Math.floor(size * dpr);
      canvas.style.width = size + "px";
      canvas.style.height = size + "px";

      await QRCode.toCanvas(canvas, text, {
        errorCorrectionLevel: ecLevel,
        margin: 2,
        width: canvas.width,
        color: {
          dark: "#000000",
          light: "#ffffff"
        }
      });

      btnDl.disabled = false;
      btnCopy.disabled = false;
      showToast("QR generated âœ…");
    }

    function downloadPNG(){
      const a = document.createElement("a");
      a.download = "qr-code.png";
      a.href = canvas.toDataURL("image/png");
      a.click();
    }

    async function copyImage(){
      try{
        const blob = await new Promise(resolve => canvas.toBlob(resolve, "image/png"));
        await navigator.clipboard.write([new ClipboardItem({ "image/png": blob })]);
        showToast("Copied to clipboard âœ…");
      }catch(e){
        showToast("Copy not supported in this browser");
      }
    }

    function clearAll(){
      elUrl.value = "";
      const ctx = canvas.getContext("2d");
      ctx.clearRect(0,0,canvas.width,canvas.height);
      btnDl.disabled = true;
      btnCopy.disabled = true;
      showToast("Cleared");
    }

    btnGen.addEventListener("click", renderQR);
    btnDl.addEventListener("click", downloadPNG);
    btnCopy.addEventListener("click", copyImage);
    btnClear.addEventListener("click", clearAll);

    // Generate on Enter
    elUrl.addEventListener("keydown", (e)=>{ if(e.key==="Enter") renderQR(); });

    // Optional: generate live as you type (uncomment if you want)
    // elUrl.addEventListener("input", ()=>{ clearTimeout(window._t); window._t=setTimeout(renderQR, 250); });
  </script>
</body>
</html>
